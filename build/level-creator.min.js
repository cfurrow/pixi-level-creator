/*! level-creator 2013-11-28 */
(function(){var a;a=function(){function a(a,b){this.x=a,this.y=b,this.ui=new DirtBlockUI(this.x,this.y)}return a}(),("undefined"!=typeof exports&&null!==exports?exports:this).DirtBlock=a}).call(this),function(){var a;a=function(){function a(a,b){this.columns=a,this.rows=b,this.build()}return a.prototype.build=function(){var a,b;return this.blocks=function(){var c,d,e;for(e=[],a=c=0,d=this.columns;d>c;a=c+=1)e.push(function(){var c,d,e;for(e=[],b=c=0,d=this.rows;d>c;b=c+=1)e.push(this.determineBlock(a,b));return e}.call(this));return e}.call(this),this.blocks},a.prototype.blockAt=function(a,b){try{return this.blocks[a][b]}catch(c){return null}},a.prototype.determineBlock=function(a,b){var c,d,e,f,g,h;return 0===a&&0===b?new WaterBlock(a,b):(e=this.blockAt(a-1,b),f=this.blockAt(a+1,b),g=this.blockAt(a,b-1),c=this.blockAt(a,b+1),d=.5,h=.5,e&&e.isDirt()?(d+=.2,h-=.1):d+=.3,Math.random()+d>Math.random()+h?new DirtBlock(a,b):new WaterBlock(a,b))},a}(),("undefined"!=typeof exports&&null!==exports?exports:this).LevelCreator=a}.call(this),function(){var a;a=function(){function a(a,b){this.x=a,this.y=b,this.ui=new WaterBlockUI(this.x,this.y)}return a}(),("undefined"!=typeof exports&&null!==exports?exports:this).WaterBlock=a}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};a=function(a){function b(){var a;a=PIXI.Texture.fromImage("images/dirt.png"),b.__super__.constructor.call(this,a)}return c(b,a),b}(PIXI.Sprite),("undefined"!=typeof exports&&null!==exports?exports:this).DirtBlockUI=a}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};a=function(a){function b(){var a;a=PIXI.Texture.fromImage("images/water.png"),b.__super__.constructor.call(this,a)}return c(b,a),b}(PIXI.Sprite),("undefined"!=typeof exports&&null!==exports?exports:this).WaterBlockUI=a}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=null!=b?b:this,a=function(){function a(a){this.containerEl=a,this.animate=c(this.animate,this),this.creator=new LevelCreator(f/d,e/b),this.renderer=new PIXI.WebGLRenderer(f,e),this.stage=new PIXI.Stage,this.buildBlockUI(),document.body.appendChild(this.renderer.view),requestAnimationFrame(this.animate)}var b,d,e,f;return f=900,e=600,d=b=30,a.prototype.buildBlockUI=function(){var a,c,e,f,g,h,i;for(a="div",i=[],f=g=0,h=this.creator.rows;h>g;f=g+=1)i.push(function(){var a,g,h;for(h=[],e=a=0,g=this.creator.columns;g>a;e=a+=1)c=this.creator.blockAt(e,f).ui,c.position.x=e*d,c.position.y=f*b,c.width=d,c.height=b,h.push(this.stage.addChild(c));return h}.call(this));return i},a.prototype.animate=function(){return this.renderer.render(this.stage),requestAnimationFrame(this.animate)},a}(),b.app=new a}.call(this);